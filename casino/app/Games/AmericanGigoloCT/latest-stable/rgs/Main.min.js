function CSpriteLibrary(){this._oLibSprites;var i,t,e,a,o=0,r=0,s=this,n=1,c=0,S=0;function d(){i.call(e),r++,_oLibSprites[this.id].loaded=n=1,opera_mini||"menu_arrow_up"===this.id&&(c=158307/((new Date).getTime()-a),canPlayVideo<0&&(canPlayVideo=c>150?1:0)),r===o&&t.call(e)}function p(){alert(r+"\n"+n+"\nerror loading image\n"+this.id+"\n"+this.src),n&&setTimeout(s.loadSprites,1e3),n=0}this.init=function(a,o,r){i=a,t=o,e=r,_oLibSprites={}},this.addSprite=function(i,t){_oLibSprites.hasOwnProperty(i)||(_oLibSprites[i]={szPath:t,oSprite:new Image,loaded:0},o++)},this.getSprite=function(i){return _oLibSprites.hasOwnProperty(i)?_oLibSprites[i].oSprite:gameAsset.images.hasOwnProperty(i)?gameAsset.images[i].oSprite:null},this.loaded=function(i){return _oLibSprites[i].loaded},this.loadSprites=function(){for(var i in _oLibSprites)_oLibSprites[i].loaded||(_oLibSprites[i].oSprite.id||(_oLibSprites[i].oSprite.onload=d,_oLibSprites[i].oSprite.onerror=p,_oLibSprites[i].oSprite.id=i),_oLibSprites[i].oSprite.src=_oLibSprites[i].szPath,opera_mini||1==++S&&(setTimeout(function(){canPlayVideo<0&&(canPlayVideo=0)},1500),a=(new Date).getTime(),_oLibSprites[i].oSprite.src+="?nnn="+a));n=1}}function CMain(){s_oMain=this,_CTSlotApp=new CTSlotApp,oS=new CSpriteLibrary;var i=0;oS.init(function(){$("#preloader_imgs_full").css({width:68+Math.round(++total_files_loaded/($total_images_to_load+$tSounds+$tScripts)*232)}),++i===$total_images_to_load&&($.each($("div[data-cbgi]"),function(i,t){$(t).css({"background-image":"url("+String(oS.getSprite($(t).attr("data-cbgi")).src).replace(/\"/g,"")+")"})}),$.each($("img[data-img]"),function(i,t){$(t).attr("src",oS.getSprite($(t).attr("data-img")).src),$(t).removeAttr("data-img")}),$.each($('div[class*="frame"]'),function(i,t){$(t).css({"background-image":"url("+String(oS.getSprite($(t).attr("class")).src).replace(/\"/g,"")+")"})}),$.each($('div[class*="signs"]'),function(i,t){$(t).css({"background-image":"url("+String(oS.getSprite($(t).attr("class")).src).replace(/\"/g,"")+")"})}),allImagesLoaded=1,videoEnd&allSounsLoaded&&_CTSlotApp.gameIsReady())},function(){},this),$.each($CT_gameObject.interface_images,function(i,t){oS.addSprite(i,nbeg+"1024/"+t)}),$.each(gameAsset.images,function(i,t){oS.addSprite(i,".."+t.path)}),$.each(gameAsset.syms,function(i,t){oS.addSprite("sym_"+i,".."+t)}),$.each(attraction,function(i,t){oS.addSprite(i,t)}),oS.loadSprites()}
